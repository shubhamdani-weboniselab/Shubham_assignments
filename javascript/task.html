 <!DOCTYPE html>
<html>
<head>
<title>Page Title</title>
<script>
	var count=0;
	var Todostore = new Array();
	var compleatedStore = new Array();
	var History = new Array();
	var todocount =0;
	var compleatedcount=0;
	var historycount=0;
	
	function store() {
		var table = document.getElementById("tableid");
		
		var data = document.getElementById("textId").value;
		if(data.length<1) {
			alert("please enter something");
			}
		
		else {
			var row = table.insertRow(0);
		var col = row.insertCell(0);
		col.innerHTML = data ;
		
		storetodb(document.getElementById("textId").value, 1);
			
		var col1 = row.insertCell(1);
		col1.innerHTML = "<button id = 'NO' onclick = onClickY(this)> Y</button>"
		var col2 = row.insertCell(2);
		col2.innerHTML = "<button id = 'Yes' onclick='onClickX(this)' > X</button>"
		count++;
		
		if(notpresentinhistory(data)) {
			storetodb(data, 45);
			}
		}
	}
	function onClickX (row) {
		
		console.log(row.parentNode.parentNode.parentNode.parentNode);
		document.getElementById(row.parentNode.parentNode.parentNode.parentNode.id).deleteRow(row.parentNode.parentNode.rowIndex);
		
		}
		
	function reload() {
		var temp = new Array();
		var temp1 = new Array();
		var temp2 = new Array();
		
		
		if(localStorage.getItem(1)) {
			temp = localStorage.getItem(1);
			var table = document.getElementById("tableid");
		if(table.rows.length>0 && localStorage.length==0) {
			console.log(table.rows.length);
		alert("no data present");
		}
		else {
		var row ;
		var col ;
		var next="";
		var roww=0;
		
		for( i=0;i<temp.length;i++) {
			if(temp[i]==',') {
				row = table.insertRow(roww);
				col = row.insertCell(0);
				col.innerHTML = next;
				var col1 = row.insertCell(1);
		col1.innerHTML = "<button id = 'NO' onclick = onClickY(this)> Y</button>"
		var col2 = row.insertCell(2);
		col2.innerHTML = "<button id = 'Yes' onclick='onClickX(this)' > X</button>"
				next="";
				roww++;
				}
			else {
				next+=temp[i];
			}
			
			}
			row = table.insertRow(roww);
				col = row.insertCell(0);
				col.innerHTML = next;
				var col1 = row.insertCell(1);
		col1.innerHTML = "<button id = 'NO' onclick = onClickY(this)> Y</button>"
		var col2 = row.insertCell(2);
		col2.innerHTML = "<button id = 'Yes' onclick='onClickX(this)' > X</button>"
			}
			}
		
		//loading compleated
		if(localStorage.getItem(2)) {
			temp1 = localStorage.getItem(2);
			var table = document.getElementById("tableid2");
		if(table.rows.length>0 && localStorage.length==0) {
			console.log(table.rows.length);
		alert("no data present");
		}
		else {
		var row ;
		var col ;
		var next="";
		var roww=0;
		
		for( i=0;i<temp1.length;i++) {
			if(temp[i]==',') {
				row = table.insertRow(roww);
				col = row.insertCell(0);
				col.innerHTML = next;
				next="";
				roww++;
				var col1 = row.insertCell(1);
				col1.innerHTML = "<button id = 'NO' onclick = onClickX(this)> X</button>"
		
				}
			else {
				next+=temp1[i];
			}
			
			}
			row = table.insertRow(roww);
				col = row.insertCell(0);
				col.innerHTML = next;
				var col1 = row.insertCell(1);
				col1.innerHTML = "<button id = 'NO' onclick = onClickX(this)> X</button>"
		
			}
			}
		}	
		window.onload=reload;
	function onClickY (row) {

		var table = document.getElementById("tableid2");
		var row1 = table.insertRow(0);
		var col = row1.insertCell(0);
		var data = document.getElementById(row.parentNode.parentNode.parentNode.parentNode.id).rows[row.parentNode.parentNode.rowIndex].cells[0].innerHTML;
		console.log(data);
		col.innerHTML = data;
			
		var col2 = row1.insertCell(1);
		col2.innerHTML = "<button id = 'Yes' onclick='onClickX(this)' > X</button>" 
		storetodb(data , 2);
		if(notpresentinhistory(data)) {
			storetodb(data, 45);
			}
		onClickX(row);
		}
		
		
	function getHistory() {
		
		var table = document.getElementById("history");
		if(table.rows.length>0 && localStorage.length==0) {
			console.log(table.rows.length);
		alert("no data present");
		}
		else {
		var row ;
		var col ;
		
		for( i=0;i<localStorage.length;i++) {
			row = table.insertRow(i);
			col = row.insertCell(0);
			col.innerHTML = localStorage.getItem(i) ;
			}
		}
		
		}
	function notpresentinhistory(data) {
		for(i=0;i<History.length;i++) {
			if(History[i]==data) {
				return false;
				}
			
			}
		return true;
		}
		
	function storetodb( data , type ) {
		
		switch (type) {
			
			case 1:
			var len = Todostore.length;
			console.log(len);
			if(typeof(Storage) !== "undefined") {
			Todostore[todocount] = data;
			localStorage.setItem(1, Todostore);
			for(i=0;i<Todostore.length ;i++)
			console.log ( Todostore[i]);
			todocount++;
	} else {}
	
			break;	
			
			case 2:
			var len = compleatedStore.length;
			console.log(len);
			if(typeof(Storage) !== "undefined") {
			compleatedStore[compleatedcount] = data;
			localStorage.setItem(2, compleatedStore);
			for(i=0;i<compleatedStore.length ;i++)
			console.log (compleatedStore[i]);
			compleatedcount++;
	} else {}
			
			break;
			
			default:
			var len = History.length;
			console.log(len);
			if(typeof(Storage) !== "undefined") {
			History[historycount] = data;
			localStorage.setItem(3, History);
			for(i=0;i<History.length ;i++)
			console.log (History[i]);
			historycount++;
	} else {}
		}
		
	}

	
</script>

</head>
<body>

<input type=text id='textId' ></input>
<button onclick="store()">store</button>
<button onclick="getHistory()" >History</button>
<br>


<h2>ToDoTable</h2>
<table id ="tableid" border =2>
</table>
<br>
<h2>Compleated</h2>

<table id ="tableid2" border =2>
</table>

<h2>History</h2>
<table id ="history" border = 2></table>	
</table>


</body>
</html> 
